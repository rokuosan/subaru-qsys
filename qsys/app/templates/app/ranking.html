{% extends "base.html"%}
{% block title%} Score | Subaru CTF {% endblock title %}
{% block content %}

<!-- {% load django_bootstrap5 %} -->
<body>
  {% include "app/components/header.html" %}

  {% if user.is_admin %}
  <section id="display_setting" class="pt-4">
    <div class="container">
      <div class="p-lg-4">
        <div class="accordion" id="settingAccordion">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                aria-expanded="true" aria-controls="collapseOne">
                Display Setting
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
              data-bs-parent="#settingAccordion">
              <div class="accordion-body">
                {% if form %}
                <form action="{% url 'ranking' %}" method="post" class="pt-3 form-check form-switch">
                  {% csrf_token %}
                  {% bootstrap_form form %}
                  {% bootstrap_button "更新" button_type="submit" button_class="btn-outline-primary" size="sm" extra_classes="px-3" %}
                </form>
                {% else %}
                {% bootstrap_alert "CTFが開催中ではないため、設定を表示できません" alert_type="warning" dismissible=False %}
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  {% endif %}

  <section id="team_ranking" class="pt-4">
    <div class="container">
      <div class="p-lg-4">
        <div>
          <h3 class="bg-black px-3 text-white" style="width: fit-content;">Team Ranking</h3>
        </div>
        <table class="table table-striped table-hover">
          <caption></caption>
          <thead>
            <tr>
              <th scope="col" class="col-1 text-center">#</th>
              <th scope="col">Team name</th>
              <th scope="col">Point</th>
            </tr>
          </thead>
          <tbody>
            {% for team in team_score_rank %}
            <tr>
              <th scope="row" class="text-center"> {{ team.rank }} </th>
              <td>{{ team.name }}</td>
              <td>{{ team.score }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <section id="player_ranking" class="pt-4">
    <div class="container">
      <div class="p-lg-4">
        <div>
          <h3 class="bg-black px-3 text-white" style="width: fit-content;">Player Ranking</h3>
        </div>
        <table class="table table-striped table-hover">
          <caption></caption>
          <thead>
            <tr>
              <th scope="col" class="col-1 text-center">#</th>
              <th scope="col">Player name</th>
              <th scope="col">Point</th>
            </tr>
          </thead>
          <tbody>
            {% for player in player_score_rank %}
            <tr>
              <th scope="row" class="text-center"> {{ player.rank }} </th>
              <td>{{ player.name }}</td>
              <td>{{ player.score }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </section>
</body>
{% endblock content %}
